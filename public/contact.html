<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Contact</title>
  <link rel="stylesheet" href="css/styles.css" />
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
</head>
<body>
  <div class="card" style="max-width: 760px; margin: 24px auto;">
    <div class="card-body">
      <h3 style="margin:0 0 8px 0">Contact</h3>
      <p>Send a message and we’ll email you back.</p>

      <div class="grid cols-2">
        <input id="ct-name" class="input" placeholder="Your name" />
        <input id="ct-email" class="input" type="email" placeholder="Your email" />
      </div>
      <textarea id="ct-msg" class="input" rows="6" placeholder="Message"></textarea>
      <div style="display:flex;justify-content:flex-end;margin-top:10px">
        <button id="ct-send" class="btn"><i class="ri-send-plane-line"></i> Send</button>
      </div>

      <p id="ct-status" style="color:var(--muted); margin-top:8px"></p>
    </div>
  </div>

  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <!-- Inside contact.html, REPLACE just the send handler with this friendlier version -->
<script>
  (function(){
    emailjs.init({ publicKey: "WT0GOYrL9HnDKvLUf" });

    const form = document.getElementById('contactForm');
    const btn  = document.getElementById('ct-send');
    const note = document.getElementById('ct-note');

    form.addEventListener('submit', function(e){
      e.preventDefault();
      if (!btn) return;
      btn.disabled = true; btn.textContent = 'Sending…';

      const payload = {
        from_name:  document.getElementById('ct-name').value.trim(),
        reply_to:   document.getElementById('ct-email').value.trim(),
        message:    document.getElementById('ct-msg').value.trim(),
      };

      emailjs.send("service_z9tkmvr","template_q5q471f", payload)
        .then(function(){
          btn.disabled = false; btn.textContent = 'Send';
          note.textContent = 'Message sent! We will get back to you soon.';
          note.className = 'ok';
          form.reset();
        })
        .catch(function(err){
          btn.disabled = false; btn.textContent = 'Send';
          // Friendly copy for common Gmail OAuth error
          var msg = (err && err.text) || (err && err.message) || 'Failed to send';
          if (/Invalid grant/i.test(msg)) {
            msg = 'Email service temporarily disconnected. Please try again later.';
          }
          note.textContent = 'Failed to send: ' + msg;
          note.className = 'warn';
        });
    });
  })();
</script>
</body>
</html>